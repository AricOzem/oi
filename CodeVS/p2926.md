# Code[VS] 2926 黑白瓷砖

> 时间限制: 1 s 空间限制: 32000 KB

## Description

小可可在课余的时候受美术老师的委派从事一项漆绘瓷砖的任务。首先把n\(n+1\)/2块正六边形瓷砖拼成三角形的形状，右图给出了n=3时拼成的“瓷砖三角形”。然后把每一块瓷砖漆成纯白色或者纯黑色，而且每块瓷砖的正、反两面都必须漆成同样的颜色。

有一天小可可突发奇想，觉得有必要试试看这些瓷砖究竟能够漆成多少种本质不同的图案。所谓两种图案本质不同就是其中的一种图案无论如何旋转、或者翻转、或者同时旋转和翻转都不能得到另外一种图案。

旋转是将瓷砖三角形整体顺时针旋转120度或240度。

翻转是将瓷砖三角形整体左右翻动180度。

![](/assets/images/codevsp2926-1.jpg)  
一开始，小可可觉得这项实验很有意思，他知道n=2时有两个本质不同的漆绘方案，n=4时也只有四个本质不同的漆绘方案。小可可还把这些漆绘方案画了出来。

但是后来小可可发现在变大的过程中，漆绘方案的数目增长很快，在n=14的时候，居然有6760803201217259503457555972096种不同的漆绘方案。这果然是一项非常艰巨的实验。因此他决定请你编写程序帮他求解本质不同的漆绘方案数

## Input

一个正整数n, n≤20

## Output

一行正整数，代表问题的解s。

## Sample Input

输入1： 1

输入2： 2

## Sample Output

输出1：2

输出2：4

## Data Size & Hint

s不超过200位

## Solve

Ploya是解决染色问题的好方法，但是观察题中的置换发现不符合构成置换群的条件  


1.单位元e，我们用置换“不动”  
2.封闭性，多加两个斜着的置换



根据Ploya定理有   
$$ans=\large\frac{\sum\limits_{i=1}^{n}c^{m(f)}}{n}$$  


$m\(f\)$为子环个数  


观察一下我们发现

对于“不动”，显然子环个数为n

对于“旋转”，

![](/assets/images/codevsp2926-2.png)

为总格子个数除以3向上取整



对于“对称”  
![](/assets/images/codevsp2926-3.png)  


为格子总数加上中轴线上（n / 2）（向上取整）个格子/2

所以有如下代码

```cpp
#include<cstdio>
BigNum f[300];
int n;
inline void ploya() {
	BigNum ans=0;
	int still=(n+1)*n/2;
	int roate=still/3+(still%3?1:0);
	int filp=(still+(n+1)/2)/2;
	f[0]=1;
	for(int i=1; i<=still||i<=roate||i<=filp; i++)
		f[i]=f[i-1]*2;
	ans=(f[still]+f[roate]*2+f[filp]*3)/6;//3*filp是因为有三条对称轴翻转 1不动 2旋转 3翻转
	ans.print();
}
int main() {
	scanf("%d",&n);
	ploya();
	return 0;
}
```

关于Pólya定律可参见 刘汝佳、黄亮《算法艺术与信息学竞赛》和Richard A.Brualdi《组合数学》
